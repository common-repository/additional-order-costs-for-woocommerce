window.AdditionalOrderCostsForWooCommerce=window.AdditionalOrderCostsForWooCommerce||{},function(o,e,t,s){var i={};s.init=function(){s.cache(),s.bindEvents()},s.cache=function(){i.window=t(o),i.body=t(e.body)},s.bindEvents=function(){},t(s.init)}(window,document,jQuery,window.AdditionalOrderCostsForWooCommerce),jQuery(document).ready((function(o){"use strict";var e=function(){var e=this;e.displayErrors=e.displayErrors.bind(e),e.editCosts=e.editCosts.bind(e),e.cancelEdit=e.cancelEdit.bind(e),e.saveCosts=e.saveCosts.bind(e),o(".inside").on("error_aoc_validation",this.displayErrors).on("click",".edit-aoc",this.editCosts).on("click",".aoc-cancel-button",this.cancelEdit).on("click",".aoc-save-button",this.saveCosts).on("change","input.aoc-edit.aoc-error",this.toggleError)};e.prototype.toggleError=function(e){console.log("toggling off"),o(this).val()&&(console.log("in the statement"),o(this).removeClass("aoc-error"))},e.prototype.editCosts=function(e){e.preventDefault(),o(".edit-aoc-tooltip").toggle(!1),o(".aoc-row").toggle(!0),o(".edit-aoc-buttons").toggle(!0),o(".edit-aoc").toggle(!1),o(".aoc-edit").toggle(!0),o(".aoc-view").toggle(!1),AOCWC.debug&&console.log("clicked total tooltip!")},e.prototype.cancelEdit=function(e){e.preventDefault(),o(".edit-aoc-buttons").toggle(!1),o(".edit-aoc").toggle(!0),o(".aoc-edit").toggle(!1),o(".aoc-view").toggle(!0);let t=o('span[id="aoc-label-view[]"]'),s=o('span[id="aoc-cost-view[]"]'),i=0;o(".aoc-edit").toggle(!1),o(".edit-aoc-buttons").toggle(!1),o(".edit-aoc").toggle(!0),console.log("we are before the eaches"),t.each((function(){console.log(s[i].val),0!=s[i].val&&0!=o(this).val()?(console.log("cost was here needs displaying: label"),o(this).toggle(!0)):(console.log("this is in the else"),o(this).toggle(!1)),i++})),i=0,s.each((function(){console.log(t[i].val),0!=t[i].val&&0!=o(this).val()?(console.log("label was here needs displaying: cost"),o(this).toggle(!0)):(console.log("this is in the second else"),o(this).toggle(!1)),i++})),AOCWC.debug&&console.log("clicked cancel in the tooltip!")},e.prototype.saveCosts=function(e){e.preventDefault();let t=AOCWC.debug;var s=o('input[name="aoc_label[]"]'),i=o('input[name="aoc_cost[]"]'),l=0,n=[],a=[];if(s.each((function(){var e=o(this).val();e?e&&(0==i[l].value?a.push({index:l,code:11}):n.push({label:e,cost:i[l].value})):(i[l].value>0||i[l].value<0)&&a.push({index:l,code:10}),l++})),t&&console.log(n),a.length>0)return void o(".inside").trigger("error_aoc_validation",[a]);let c=o(this).data("aoc");o(".aoc-edit-"+c).toggle(!1),o(".aoc-view-"+c).toggle(!0),o("#edit-aocs-tooltip-"+c).toggle(!1);var d={action:"aoc_wc_set_costs",security:AOCWC.nonce,post_id:o("#post_ID").val(),aoc:n};o.post(ajaxurl,d,(function(e){t&&console.log("Additional Costs sent!"),o(this).addClass("loading"),o(this).attr("disabled",!0)})).done((function(){o(this).attr("disabled",!1),o(this).removeClass("loading")})).fail((function(){t&&console.log("failed")})).success((function(e){t&&console.log("success");let s=o('span[id="aoc-label-view[]"]'),i=o('span[id="aoc-cost-view[]"]'),l=0;o(".aoc-edit").toggle(!1),o(".edit-aoc-buttons").toggle(!1),o(".edit-aoc").toggle(!0),console.log("we are before the eaches"),s.each((function(){void 0!==e.payload.cost_data[l]?(console.log("cost was saved, adding the html and toggling on: this is the label"),o(this).toggle(!0),o(this).html(e.payload.cost_data[l].label)):(console.log("this is in the else"),o(this).toggle(!1)),l++})),console.log(window.wc.wcSettings.CURRENCY),l=0,i.each((function(){void 0!==e.payload.cost_data[l]?(console.log("cost was saved, adding the html and toggling on: this is the cost"),o(this).toggle(!0),o(this).html('<span class="woocommerce-Price-amount amount"><span class="woocommerce-Price-currencySymbol">'+AOCWC.currency+"</span>"+e.payload.cost_data[l].cost.toFixed(2)+"</span>")):(console.log("this is in the second else"),o(this).toggle(!1)),l++}))})).always((function(){}))},e.prototype.displayErrors=function(e,t){let s=AOCWC.debug;t.length>0&&o.each(t,(function(e,t){10==t.code&&(s&&(console.log("setting label error on index: "+t.index),console.log(o("#aoc_label_"+t.index))),o("#aoc_label_"+t.index).addClass("aoc-error")),11==t.code&&(s&&(console.log("setting cost error on index: "+t.index),console.log(o("#aoc_cost_"+t.index))),o("#aoc_cost_"+t.index).addClass("aoc-error"))}))},new e}));